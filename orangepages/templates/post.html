<div class="post-card card border-left-20 border-right-10 rounded-0" style="margin-bottom: 15px;
margin-top:-1px">
  <div class="container-fluid">

    <div class="row">
      <!-- Profile photo -->
      <div class="col" style="padding-top: 10px; -ms-flex: 0 0 40px; flex: 0 0 40px;">
        {%if user._pic is none:%}
        <i class="fa fa-user feed-profile rounded-circle"></i>
        {%else:%}
        <a href='/profile/{{ post.creator.uid }}'>
          <img class="feed-profile rounded-circle"
            src='https://res.cloudinary.com/hcfgcbhqf/image/upload/c_fill,h_120,w_120,g_face,r_10/{{post.creator._pic}}.png'
            alt="failed to load">
          {%endif%}
        </a>
      </div>

      <!-- User and netid -->
      <div class="col" style="padding-top: 10px">
        <a href='/profile/{{ post.creator.uid }}' class="post-title">{{post.creator.firstname}}
          {{post.creator.lastname}} <h6 class="post-subtitle"> @{{post.creator.uid}} </h6> </a>
      </div>

      <!-- Time elapsed -->
      <div class="col" style="padding-top: 10px; text-align: right; -ms-flex: 0 0 95px; flex: 0 0 95px;">
        <div class="post-subtitle">
          <i class="fas fa-clock"></i>
          <span id="tstamp{{post.pid}}"></span>
          <script type="text/javascript">
            getTimeAgo("{{ post.date }}", "tstamp{{post.pid}}");
          </script>
        </div>

      </div>
    </div>

    <!-- Content -->
    <div class="row">

      <div class="col" style="padding-top: 10px; -ms-flex: 0 0 78px; flex: 0 0 78px;"></div>
      <div class="col">
        <div class="post-text mb-1">
          {{post.content|safe}}
        </div>
        <a href={{post.get_img()}}><img src="{{post.get_img()}}" width="100%"></a>
        {% if post.tags|length %}
        <div style="margin-top: 6px; margin-bottom: 6px">
          {% for tag in post.tags: %}
          <button type="button" onclick="location.href='/search?query={{ tag.tid }}'"
            class="btn btn-primary btn-sm tag-pill text-truncate" style="outline: none">
            #{{ tag.tid }}
          </button>
          {% endfor %}
        </div>
        {% endif %}
      </div>

    </div>

    <div class="row" style="padding: 6px; border-top: 1px solid #f0f0f0; border-bottom: 1px solid #f0f0f0;">
      <div class="col">

        {% if user.liked_post(post.pid) %}
        <a href='#' class="card-link" onclick="toggleLikePost('{{post.pid}}'); return false;">
          <i class="fas fa-heart"></i> {{post.likes|length}}
        </a>
        {% else %}
        <a href='#' class="card-link" onclick="toggleLikePost('{{post.pid}}'); return false;">
          <i class="far fa-heart"></i> {{post.likes|length}}
        </a>
        {% endif %}

        <a href='#comment-input' onclick="focusMethod()" class="card-link"><i class="fa fa-comment"></i>
          {{post.get_comments()|length}}</a>
      </div>
    </div>

    <!-- Comments -->
    {% for comment in post.get_comments() %}
    <div class="row mb-3 mt-3">
      <div class="col" style="-ms-flex: 0 0 50px; flex: 0 0 50px;">
        {%if comment.creator._pic is none:%}
        <i class="fa fa-xs fa-user rounded-circle"></i>
        {%else:%}
        <a href='/profile/{{ comment.creator.uid }}'></a>
        <img class="feed-profile rounded-circle" style="width:30px; height:30px;"
          src='https://res.cloudinary.com/hcfgcbhqf/image/upload/c_fill,h_120,w_120,g_face,r_10/{{comment.creator._pic}}.png'
          alt="failed to load">
        {%endif%}
      </div>
      <div class="col post-comment">
        <a href='/profile/{{ comment.creator.uid }}' class="post-title">{{comment.creator.firstname}}
          {{comment.creator.lastname}} </a>
        <i class="ml-2 post-subtitle fas fa-clock"></i>
        <span class="post-subtitle" id="tstamp{{comment.cid}}"></span>
        <script type="text/javascript">
          getTimeAgo("{{ comment.date }}", "tstamp{{comment.cid}}");
        </script>

        <br />
        {{comment.content}}
      </div>
    </div>
    {% endfor %}

    <form id="comment{{post.pid}}">
      <div class="row" style="border-top: 1px solid #f0f0f0; margin-top: -1px">
        <div class="col mt-2" style="margin-bottom: 12px;">
          <textarea name="content" id="comment-input" class="form-control comment-textarea post-subtitle" rows="1"
            placeholder="Write a comment..."></textarea>
        </div>
        <div class="col mt-2" style="-ms-flex: 0 0 40px; flex: 0 0 40px; padding-left: 0px">
          <button type="submit" class="btn btn-comment"
            onclick="postCommentPost('{{post.pid}}'); return false;">Post</button>
        </div>
      </div>
    </form>

  </div>
</div>

</div>

<script>
focusMethod = function setCommentFocus() {           
  document.getElementById("comment-input").focus();
}
</script>