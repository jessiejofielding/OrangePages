<!DOCTYPE html>
<html lang="en">

<!--CSS-->
<link rel="stylesheet" href="/static/css/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="/static/css/styles.css" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<link rel='stylesheet' href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/static/css/bootstrap-tagsinput.css">

<!-- Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800">

<!--JS-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js'></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/timestamp.js"></script>
<script src="/static/js/toggle-like.js"></script>
<script src="/static/js/bootstrap-tagsinput.js"></script>
<script src="/static/js/disable-input.js"></script>

<script>

    $(document).ready(function () {
        $("#hide").toggle()
        $('.js-edit').on('click', function () {
            var $form = $(this).closest('form');
            $form.toggleClass('is-readonly is-editing');
            var isReadonly = $form.hasClass('is-readonly');
            $form.find('input,select,textarea').prop('disabled', isReadonly);
            $("#hide").toggle()
        });
                // Name of file appears on upload
        $(".custom-file-input").on("change", function() {
            var fileName = $(this).val().split("\\").pop();
            $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
        });

    });
    
            
</script>

<body>
{% include 'navbar.html' %}
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" rel="stylesheet"/>
  <div class="row">
    <div class="col-lg-3 col-sm-5 ml-2 border-right">
      <div class="sidebar sticky-top">
        <div id="sidebar-buttons" class="btn-group-vertical btn-group-lg">
          <a href="/" class="btn-sidebar btn text-left"><i class="fas fa-home mr-1"></i>Home</a>

          <!-- TODO: verify that notifications appear -->
          <a href="/notifications" class="btn-sidebar btn text-left"><i class="fas fa-bell mr-1"></i>Notifications
            {% if user._unread_notifs > 0 %}({{user._unread_notifs}}){% endif %}</a>
          <a href="/profile/{{user.uid}}" class="btn-sidebar btn text-left"><i class="fas fa-user mr-1"></i>Profile</a>
          <a href="/profile/{{user.uid}}/friends-list" class="btn-sidebar btn text-left"><i class="fas fa-user-friends mr-1"></i>Friends</a>
          <a href="/settings" class="btn-sidebar btn text-left"><i class="fas fa-user-cog mr-1"></i>Settings and Privacy</a>
          <a href="/" class="btn-sidebar btn text-left"><i class="fas fa-info-circle mr-1"></i>About</a>
          <a href="/" class="btn-sidebar btn text-left"><i class="fas fa-phone mr-1"></i>Contact Us</a>
        </div>
      </div>
    </div>
    
    <!-- Main page -->
    <div class="col-lg-6 col-sm-5 pl-0 pr-0 border-right" style="margin-top:95px;" id="main">
        <div class="container">
            <div class="col">
                <form class="is-readonly" action="/edit-user" method="post" enctype=multipart/form-data>
                    <fieldset>
                        <h2 class="fs-title">Your Details</h2>

                        <div class="row">
                            <div class="col-lg-3 text-left">First Name:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="firstname"
                                    id="exampleInputPassword1" placeholder="First Name" value="{{user.firstname}}"
                                    disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Last Name:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="lastname"
                                    id="exampleInputPassword1" placeholder="Last Name" value="{{user.lastname}}"
                                    disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Email:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="email"
                                    id="exampleInputPassword1" placeholder="Email" value="{{user.email}}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Class Year:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="year"
                                    id="exampleInputPassword1" placeholder="Class Year" value="{{user.year}}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Major:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="major"
                                    id="exampleInputPassword1" placeholder="Major" value="{{user.major}}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Hometown:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="hometown"
                                    id="exampleInputPassword1" placeholder="Hometown" value="{{user.hometown}}"
                                    disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">State:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="state"
                                    id="exampleInputPassword1" placeholder="State" value="{{user.state}}"
                                    disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Country:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="country"
                                    id="exampleInputPassword1" placeholder="Country" value="{{user.country}}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Room:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="room"
                                    id="exampleInputPassword1" placeholder="Room" value="{{user.room}}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 text-left">Building:</div>
                            <div class="col-lg-9">
                                <input type="text" class="form-control is-disabled" name="building"
                                    id="exampleInputPassword1" placeholder="Building" value="{{user.building}}"
                                    disabled>
                            </div>
                        </div>

                        <!-- @frontend -->
                        <div id ="hide">
                            <hr>
                            <div class="row">
                                <div class="col-lg-9 text-left">Update profile picture:</div>
                            
                                <div class="custom-file col-lg-11 ml-3">
                                  <input type="file" class="custom-file-input form-control-file is-disabled" name="image" id="image" disabled>
                                  <label class="custom-file-label" for="image">Select image...</label>
                                </div>
                            </div>
                            <br>
                        </div>

                    <div class="row pt-2">
                        <div class="col-lg-9 text-right">
                            <button type="button" class="btn btn-primary tag-pill btn-edit js-edit">
                                Edit
                            </button>
                            <button type="submit" class="btn btn-primary tag-pill btn-save js-save">
                                Save
                            </button>
                        </div>
                    </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
    

    <div class="col" style="margin-top:95px;">
        <div class="row">
            <div class="col">
                <div class="card" style="width: 100%">
                    <div class="card-body text-center">
                        {%if user._pic is none:%}
                        <i class="fa fa-user fa-5x"></i>
                        {%else:%}
                        <img src='https://res.cloudinary.com/hcfgcbhqf/image/upload/c_fill,h_120,w_120,g_face,r_10/{{user._pic}}.png'
                            alt="failed to load">
                        {%endif%}
                        <br>
                        <br>
                        <h3 class="card-title"><strong>{{user.firstname}} {{user.lastname}}</strong></h3>
                        <p class="card-text">netid: {{user.uid}}</p>
                    </div>
                </div>
            </div>
    </div>
  </div>

  
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.12/dist/js/bootstrap-select.min.js"></script>

  <script>
    var loadFile = function(event) {
        var image = document.getElementById('uploaded');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
    </script>
</body>

</html>



